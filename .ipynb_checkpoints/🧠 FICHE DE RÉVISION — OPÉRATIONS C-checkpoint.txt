ğŸ§  FICHE DE RÃ‰VISION â€” OPÃ‰RATIONS CRUD MONGODB
ğŸ’¡ DÃ©finition gÃ©nÃ©rale

CRUD =
â¡ï¸ Create â†’ crÃ©er un document
â¡ï¸ Read â†’ lire / interroger des documents
â¡ï¸ Update â†’ modifier un document
â¡ï¸ Delete â†’ supprimer un document

ğŸ‘‰ Ces 4 opÃ©rations couvrent tout le cycle de vie des donnÃ©es dans MongoDB.

ğŸ§± 1ï¸âƒ£ CREATE â€” InsÃ©rer des documents
â¤ En Shell :
db.patients.insertOne({ name: "Alice", age: 25, blood: "A+" })


ou plusieurs :

db.patients.insertMany([
  { name: "Bob", age: 40 },
  { name: "Clara", age: 31 }
])

â¤ En Python (PyMongo) :
patient = { "name": "Alice", "age": 25, "blood": "A+" }
db.patients.insert_one(patient)


ğŸ‘‰ Mongo ajoute automatiquement un champ _id (identifiant unique BSON).

ğŸ” 2ï¸âƒ£ READ â€” Lire / interroger des documents
â¤ En Shell :

Afficher tous :

db.patients.find()


Filtrer :

db.patients.find({ "blood": "A+" })


Afficher plus lisiblement :

db.patients.find({ "age": { "$gt": 30 } }).pretty()

â¤ En Python :
for p in db.patients.find({"age": {"$gt": 30}}):
    print(p)

ğŸ”¹ Options utiles :

$gt, $lt, $eq â†’ comparaisons

$and, $or â†’ combinaisons

sort() â†’ tri

limit() â†’ limite de rÃ©sultats

âœï¸ 3ï¸âƒ£ UPDATE â€” Modifier un document
â¤ En Shell :

Modifier un seul :

db.patients.updateOne(
  { "name": "Alice" },
  { "$set": { "age": 26 } }
)


Modifier plusieurs :

db.patients.updateMany(
  { "blood": "A+" },
  { "$set": { "risk": "low" } }
)

â¤ En Python :
db.patients.update_one(
  { "name": "Alice" },
  { "$set": { "age": 26 } }
)

ğŸ§  Remarque :

$set â†’ modifie une valeur existante ou la crÃ©e

$unset â†’ supprime un champ

$inc â†’ incrÃ©mente une valeur numÃ©rique

ğŸ—‘ï¸ 4ï¸âƒ£ DELETE â€” Supprimer des documents
â¤ En Shell :
db.patients.deleteOne({ "name": "Alice" })
db.patients.deleteMany({ "age": { "$lt": 18 } })

â¤ En Python :
db.patients.delete_one({"name": "Alice"})

ğŸ” 5ï¸âƒ£ UPSERT â€” Update + Insert automatique

Permet de mettre Ã  jour un document sâ€™il existe,
ou de lâ€™insÃ©rer sinon.

â¤ En Shell :
db.patients.updateOne(
  { "name": "David" },
  { "$set": { "age": 30, "blood": "O-" } },
  { upsert: true }
)

â¤ En Python :
db.patients.update_one(
  { "name": "David" },
  { "$set": { "age": 30, "blood": "O-" } },
  upsert=True
)


âœ… Câ€™est ce que ton script app.py fait avec UpdateOne(..., upsert=True).

âš™ï¸ 6ï¸âƒ£ Les index

Les index accÃ©lÃ¨rent les recherches et empÃªchent les doublons.

CrÃ©er un index unique :

db.patients.createIndex({ "name": 1, "age": 1 }, { unique: true })


Supprimer un index :

db.patients.dropIndex("name_1_age_1")


Lister les index :

db.patients.getIndexes()

ğŸ§© 7ï¸âƒ£ RÃ©sumÃ© rapide
Action	Commande shell	MÃ©thode Python	But principal
Create	insertOne()	insert_one()	CrÃ©er un document
Read	find()	find()	Lire un ou plusieurs documents
Update	updateOne()	update_one()	Modifier un document
Delete	deleteOne()	delete_one()	Supprimer un document
Upsert	updateOne(..., upsert:true)	update_one(..., upsert=True)	CrÃ©er ou maj automatiquement
ğŸ—£ï¸ Phrase type pour la soutenance

â€œMongoDB repose sur les opÃ©rations CRUD.
On peut insÃ©rer, lire, modifier et supprimer des documents de maniÃ¨re trÃ¨s souple.
Par exemple, avec PyMongo, jâ€™utilise update_one(..., upsert=True) pour insÃ©rer ou mettre Ã  jour automatiquement un patient.
Les index me permettent ensuite dâ€™Ã©viter les doublons et dâ€™accÃ©lÃ©rer les recherches.â€

Souhaites-tu que je te fasse maintenant la fiche suivante sur les index et la structuration des collections (souvent demandÃ©e Ã  lâ€™oral juste aprÃ¨s CRUD) ?